<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chart Example</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="application/javascript">

        function insertPoint(){
            var data = {};
            data.x = $('#x').val();
            data.y  = $('#y').val();
            var method = 'POST';
            var restApi = "localhost:8080/rest/point";
            //var restApi = "localhost:8080/rest/point/"+JSON.stringify(data);
            call(method, restApi);
        }

        function getSpace(){
            var method = 'GET';
            var restApi = "localhost:8080/rest/space";
            call(method, restApi);
        }

        function cleanSpace(){
            var method = 'DELETE';
            var restApi = "localhost:8080/rest/space/2";
            call(method, restApi);
        }

        function getLine(){
            var method = 'GET';
            var restApi = "localhost:8080/rest/lines/1";
            call(method, restApi);
        }

        function call(method,api){
            var xhr = new XMLHttpRequest();
            //xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = function() {
                if (xhr.readyState == XMLHttpRequest.DONE) {
                    $('#resultMsg').html(xhr.responseText);
                    alert(xhr.responseText);
                }
            }
            xhr.open(method, 'http://'+api, true);
            xhr.send(null);
        }

        function draw(){
            var trace1 = {
                x: [1, 2, 3, 4],
                y: [10, 15, 13, 17],
                mode: 'markers'
            };

            var trace2 = {
                x: [2, 3, 4, 5],
                y: [16, 5, 11, 10],
                mode: 'lines'
            };

            var trace3 = {
                x: [1, 2, 3, 4],
                y: [12, 9, 15, 12],
                mode: 'lines+markers'
            };

            var data = [ trace1, trace2, trace3 ];

            var layout = {};

            Plotly.newPlot('chartDiv', data, layout);
        }
    </script>
</head>
<body onload="draw()">
    <div id="resultMsg"></div>
    <button type="button" onclick="insertPoint()">Insert Point</button>
    x: <input type="text" id="x" name="x" style="width: 30px;">
    y: <input type="text" id="y" name="y" style="width: 30px;"><br>
    <button type="button" onclick="getSpace()">Get space</button><br>
    <button type="button" onclick="cleanSpace()">Clean space</button><br>
    <button type="button" onclick="getLine()">Get Line</button>
    Line: <input type="text" id="lineNumber" name="lineNumber" style="width: 30px;"><br>

    <div id="chartDiv"></div>

</body>
</html>